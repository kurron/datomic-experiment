allprojects {
    repositories {
        mavenCentral()
        flatDir {
            dirs "${rootDir}/lib"
        }
    }

    task generateWrapper(type: Wrapper) {
        gradleVersion = '1.2'
    }

    defaultTasks 'clean', 'build', 'collectJars'
}

subprojects {

    apply plugin: 'groovy'

    dependencies {
        groovy "org.codehaus.groovy:groovy-all:${groovyVersion}"
        compile 'datomic:datomic-free:0.8.3551@jar'
        testCompile "org.spockframework:spock-core:${spockVersion}"
        testCompile "org.hamcrest:hamcrest-core:${hamcrestVersion}" // only necessary if Hamcrest matchers are used
    }


    defaultTasks 'clean', 'build', 'collectJars'

    task collectJars(type: Copy) {
        into "$buildDir/output/lib"
        from configurations.testRuntime
    }
}

